(this["webpackJsonpsnake-game"]=this["webpackJsonpsnake-game"]||[]).push([[0],[,,,,,,function(e,t,r){e.exports=r(13)},,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(3),c=r.n(o),i=(r(11),r(5)),l=r(1),s=r(4),h=(r(12),Object(n.forwardRef)((function(e,t){var r=Object(n.useState)(0),o=Object(l.a)(r,2),c=o[0],i=o[1],s=Object(n.useState)(!1),h=Object(l.a)(s,2),u=h[0],d=h[1];return Object(n.useImperativeHandle)(t,(function(){return{reset:function(){i(0),d(!0)},toggle:function(){d(!u)}}})),Object(n.useEffect)((function(){var e=null;return u?e=setInterval((function(){i((function(e){return e+1}))}),1e3):u||0===c||clearInterval(e),function(){return clearInterval(e)}}),[u,c]),a.a.createElement("div",{className:"app"},a.a.createElement("div",{className:"time"},"time : ",c,"s"))})));function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(r,!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f={Space:32,Left:37,Up:38,Right:39,Down:40,a:65,s:83,w:87,d:68},g=f.Right,w={grid:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,r=[],n=0;n<e;n++){for(var a=[],o=0;o<t;o++)a.push({row:n,col:o});r.push(a)}return r}(30,30),snake:{head:{row:5,col:9},tail:[]},food:{row:Math.floor(5*Math.random()),col:Math.floor(5*Math.random())},score:0,showGrid:!0,lost:!1,message:"Click start button or any key on keyboard to start the game.",inProgress:!1,highScore:0};var m=function(e,t){switch(t.type){case"game_lost":return d({},e,{showGrid:e.showGrid,lost:!0,inProgress:!1,highScore:t.highScore});case"update":return d({},e,{},t.newState);case"toggle_grid":return d({},e,{showGrid:!e.showGrid});case"update_grid":return d({},e,{grid:t.grid});case"restart":return d({},w,{inProgress:!0,highScore:t.highScore,grid:e.grid});default:return e}};var p=function(){var e=Object(n.useReducer)(m,w),t=Object(l.a)(e,2),r=t[0],o=t[1],c=r.score,s=r.snake,u=r.message,p=r.inProgress,v=Object(n.useRef)(),b=function(e){p?e.which===f.Left||e.which===f.a?g=f.Left:e.which===f.Right||e.which===f.d?g=f.Right:e.which===f.Up||e.which===f.w?g=f.Up:e.which!==f.Down&&e.which!==f.s||(g=f.Down):I()};Object(n.useEffect)((function(){var e=null;return p?e=setInterval((function(){j()}),100):p||clearInterval(e),function(){clearInterval(e)}}),[p,s.head]),Object(n.useEffect)((function(){return document.addEventListener("keydown",b),function(){document.removeEventListener("keydown",b)}}));var k=function(e){var t=r.snake,n=r.food,a=r.showGrid,o="cell ";return t.head.row===e.row&&t.head.col===e.col?o="cell head":n.row===e.row&&n.col===e.col?o="cell food":t.tail.find((function(t){return t.row===e.row&&t.col===e.col}))&&(o="cell tail"),o=a?o+" cell-border":o},O=function e(){var t=r.snake,n={row:Math.floor(30*Math.random()),col:Math.floor(30*Math.random())};return t.head.row===n.row&&t.head.col===n.col?e():n},y=function(){return localStorage.getItem("highScore")||0},E=y(),j=function(){var e=S();if(P())N();else{var t=1,n=0;g===f.Left?(t=-1,n=0):g===f.Right?(t=1,n=0):g===f.Up?(t=0,n=-1):g===f.Down&&(t=0,n=1);var a={snake:d({},r.snake,{head:{row:r.snake.head.row+n,col:r.snake.head.col+t},tail:[r.snake.head].concat(Object(i.a)(r.snake.tail))}),food:e?O():r.food,score:e?c+1:c};e||a.snake.tail.pop(),o({type:"update",newState:a})}},S=function(){var e=r.food,t=r.snake;return e.row===t.head.row&&e.col===t.head.col},P=function(){var e=r.snake,t=r.grid,n=e.head,a=e.tail;return e.head.col>=t.length||e.head.row>=t.length||e.head.col<0||e.head.row<0||a.find((function(e){return e.row===n.row&&e.col===n.col}))},I=function(){v.current.reset(),R()},N=function(){v.current.toggle(),function(){var e=localStorage.getItem("highScore")||0;c>e&&(e=c),localStorage.setItem("highScore",e)}(),E=y(),o({type:"game_lost",highScore:E})},R=function(){E=y(),o({type:"restart",highScore:E})};return a.a.createElement("div",{className:"App"},a.a.createElement("div",{className:"info-wrapper"},a.a.createElement(h,{ref:v}),a.a.createElement("label",{class:"checkbox-wrapper"},"show grid",a.a.createElement("input",{type:"checkbox",checked:r.showGrid,onChange:function(e){o({type:"toggle_grid"})},className:"toggle-grid"}),a.a.createElement("span",{class:"check-mark"})),a.a.createElement("div",{className:"checkbox-wrapper"}),a.a.createElement("div",null,"Score : ",c),a.a.createElement("div",null,"high-score : ",E," "),a.a.createElement("button",{onClick:I,className:"restart"},"Restart/Start")),a.a.createElement("div",{className:"message"},u),a.a.createElement("div",{className:"grid-container"},a.a.createElement("div",{className:"grid"},r.grid.map((function(e){return e.map((function(e){var t=k(e);return a.a.createElement("div",{key:e.row+e.col,className:t})}))})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(p,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[6,1,2]]]);
//# sourceMappingURL=main.ab407430.chunk.js.map